
<!DOCTYPE html>
<html lang="zn-CH" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hexo</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="Fechin,"> 
    
    <meta name="author" content="John Doe"> 
    <link rel="alternative" href="atom.xml" title="Hexo" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

    
<link rel="stylesheet" href="/css/diaspora.css">

</head>

<body class="loading">
    <span id="config-title" style="display:none">Hexo</span>
    <div id="loader"></div>
    <div id="single" class="page">
    <div id="top">
        <a class="iconfont icon-left image-icon" href="javascript:history.back()"></a>
    </div>
    <div class="section">
        <div class="article">
            <div class="main">
                <div class="content">
                
                        <!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="1全局刷新和局部刷新 全局刷新：使用form，href等发起的请求是全局刷新 用户发起请求，试图改变，跳转视图，使用新的数据添加到页面 缺点：  传递数据量比较大。占用网络的带宽 浏览器需要重新的渲染整个页面 用户体验不是那么好   局部刷新：在当前页面中，发起请求，获取数据，更新当前页面的dom对象，对试图部分刷新 特点：  数量比较小，在网络中传输速度快 更新页面内容，是部分跟新页面，浏览器不">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://cyclecod.github.io/2021/06/14/Ajax/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="1全局刷新和局部刷新 全局刷新：使用form，href等发起的请求是全局刷新 用户发起请求，试图改变，跳转视图，使用新的数据添加到页面 缺点：  传递数据量比较大。占用网络的带宽 浏览器需要重新的渲染整个页面 用户体验不是那么好   局部刷新：在当前页面中，发起请求，获取数据，更新当前页面的dom对象，对试图部分刷新 特点：  数量比较小，在网络中传输速度快 更新页面内容，是部分跟新页面，浏览器不">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-06-14T11:13:55.649Z">
<meta property="article:modified_time" content="2021-06-14T11:13:55.649Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">

<pre><code>&lt;link rel=&quot;alternate&quot; href=&quot;/atom.xml&quot; title=&quot;Hexo&quot; type=&quot;application/atom+xml&quot;&gt;



&lt;link rel=&quot;shortcut icon&quot; href=&quot;/favicon.png&quot;&gt;
</code></pre>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  

<link rel="stylesheet" href="/css/style.css">


<p>​    </p>
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">


<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>

<pre><code>&lt;/div&gt;
&lt;div id=&quot;header-inner&quot; class=&quot;inner&quot;&gt;
  &lt;nav id=&quot;main-nav&quot;&gt;
    &lt;a id=&quot;main-nav-toggle&quot; class=&quot;nav-icon&quot;&gt;&lt;/a&gt;
    
      &lt;a class=&quot;main-nav-link&quot; href=&quot;/&quot;&gt;Home&lt;/a&gt;
    
      &lt;a class=&quot;main-nav-link&quot; href=&quot;/archives&quot;&gt;Archives&lt;/a&gt;
    
  &lt;/nav&gt;
  &lt;nav id=&quot;sub-nav&quot;&gt;
    
      &lt;a id=&quot;nav-rss-link&quot; class=&quot;nav-icon&quot; href=&quot;/atom.xml&quot; title=&quot;RSS 订阅&quot;&gt;&lt;/a&gt;
    
    &lt;a id=&quot;nav-search-btn&quot; class=&quot;nav-icon&quot; title=&quot;搜索&quot;&gt;&lt;/a&gt;
  &lt;/nav&gt;
  &lt;div id=&quot;search-form-wrap&quot;&gt;
    &lt;form action=&quot;//google.com/search&quot; method=&quot;get&quot; accept-charset=&quot;UTF-8&quot; class=&quot;search-form&quot;&gt;&lt;input type=&quot;search&quot; name=&quot;q&quot; class=&quot;search-form-input&quot; placeholder=&quot;搜索&quot;&gt;&lt;button type=&quot;submit&quot; class=&quot;search-form-submit&quot;&gt;&amp;#xF002;&lt;/button&gt;&lt;input type=&quot;hidden&quot; name=&quot;sitesearch&quot; value=&quot;https://cyclecod.github.io&quot;&gt;&lt;/form&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
  </div>
</header>

<pre><code>  &lt;div class=&quot;outer&quot;&gt;
    &lt;section id=&quot;main&quot;&gt;&lt;article id=&quot;post-Ajax&quot; class=&quot;h-entry article article-type-post&quot; itemprop=&quot;blogPost&quot; itemscope itemtype=&quot;https://schema.org/BlogPosting&quot;&gt;
</code></pre>
  <div class="article-meta">
    <a href="/2021/06/14/Ajax/" class="article-date">
  <time class="dt-published" datetime="2021-06-14T11:13:55.649Z" itemprop="datePublished">2021-06-14</time>
</a>

  </div>
  <div class="article-inner">

<p>​<br>    <div class="e-content article-entry" itemprop="articleBody"></p>
<pre><code>    &lt;h1 id=&quot;1全局刷新和局部刷新&quot;&gt;&lt;a href=&quot;#1全局刷新和局部刷新&quot; class=&quot;headerlink&quot; title=&quot;1全局刷新和局部刷新&quot;&gt;&lt;/a&gt;1全局刷新和局部刷新&lt;/h1&gt;&lt;ol&gt;
</code></pre>
<li><p>全局刷新：使用form，href等发起的请求是全局刷新</p>
<p>用户发起请求，试图改变，跳转视图，使用新的数据添加到页面</p>
<p>缺点：</p>
<ol>
<li>传递数据量比较大。占用网络的带宽</li>
<li>浏览器需要重新的渲染整个页面</li>
<li>用户体验不是那么好</li>
</ol>
</li>
<li><p>局部刷新：在当前页面中，发起请求，获取数据，更新当前页面的dom对象，对试图部分刷新</p>
<p>特点：</p>
<ol>
<li>数量比较小，在网络中传输速度快</li>
<li>更新页面内容，是部分跟新页面，浏览器不用全部渲染试图</li>
<li>在一个页面中，可以做多个 局部刷新</li>
<li>从服务器获取的是数据，拿到跟新视图</li>
</ol>
<h1 id="2异步请求对象"><a href="#2异步请求对象" class="headerlink" title="2异步请求对象"></a>2异步请求对象</h1><p>在局部刷新中，使用异步请求对象，在浏览器内部发起请求，获取数据</p>
<p>异步对象是在浏览器内部的一种JavaScript对象，各大浏览器都能支持异步对象的使用</p>
<p>异步对象：XMLHttpRequest</p>
<h1 id="3-异步对象XMLHttpRequest接收"><a href="#3-异步对象XMLHttpRequest接收" class="headerlink" title="3.异步对象XMLHttpRequest接收"></a>3.异步对象XMLHttpRequest接收</h1><p>js中的一种对象，使用js语法创建和使用这个对象</p>
<p>let xhr = new  XMLHttpRequest();</p>
<p>之后就可以使用xhr对象的属性和函数，进行异步对象的操作</p>
<p>使用异步对象实现局部刷新：异步对象主要负责发起请求，传递请求的参数，并从服务器接收数据</p>
<p>局部刷新需要使用那些技术：</p>
<ol>
<li>javascript:创建XMLHttpRequest对象，调用它的属性和方法</li>
<li>dom：处理dom，更新页面数据</li>
<li>css：处理试图，跟新，美化</li>
<li>servlet：服务器端技术</li>
<li>数据格式：json，他之前是xml</li>
</ol>
<p>把上面这些技术的综合使用叫做Ajax（阿贾克斯）</p>
<h1 id="4-Ajax"><a href="#4-Ajax" class="headerlink" title="4.Ajax"></a>4.Ajax</h1><p>Ajax=Asynchronous JavaScript and XML （异步的JavaScript和XML）</p>
<p>Ajax是一种在无需重新加载整个页面的情况下，能够跟新出部分页面内容的新方法</p>
<p>Ajax不是一种新的编程语言</p>
<p>使用Ajax实现局部刷新</p>
<p>Ajax的核心是JavaScript和XML（json）：使用JavaScript操作异步对象XMLHttpRequest，和服务器交换使用json数据格式</p>
<h1 id="5-异步对象XMLHttpRequest属性和方法"><a href="#5-异步对象XMLHttpRequest属性和方法" class="headerlink" title="5.异步对象XMLHttpRequest属性和方法"></a>5.异步对象XMLHttpRequest属性和方法</h1><ol>
<li><p>创建异步对象，使用js的语法</p>
<p>let xhr = new XMLHttpRequest();</p>
</li>
<li><p>XMLHttpRequest方法</p>
<p>①open(请求方式,服务器端的访问地址,异步还是同步)</p>
<p>例如：xhr.open(“get”,”loginServlet”,true)</p>
<p>②send():使用异步对象发送请求</p>
</li>
<li><p>XMLHttpRequest属性</p>
<p>readyState属性：请求的状态</p>
<p>​    0：表示创建异步对象时：new XMLHttpRequest();</p>
<p>​    1：表示初始异步对象的请求参数，执行open()方法</p>
<p>​    2：使用send()方法发送请求。</p>
<p>​    3：使用异步对象从服务器接收了数据</p>
<p>​    4：异步对象接收了数据，并在异步对象内部处理完成后</p>
<p>status属性：</p>
<p>​    200：请求成功</p>
<p>​    404：服务器资源没用找到</p>
<p>​    500：服务器内部代码有错误</p>
<p>responseText属性：表示服务器端返回的数据</p>
<p>​    例如：let data = xhr.responseText;</p>
<h1 id="6-异步对象XMLHttpRequest使用步骤"><a href="#6-异步对象XMLHttpRequest使用步骤" class="headerlink" title="6.异步对象XMLHttpRequest使用步骤"></a>6.异步对象XMLHttpRequest使用步骤</h1><ol>
<li><p>使用js创建异步对象</p>
<p>let xhr = new XMLHttpResquest</p>
</li>
<li><p>给异步对象绑定事件，事件名称 onreadystatechange</p>
<p>例如button增加单击事件onclick</p>
<p>xhr绑定事件</p>
<p>xhr.onreadystatechange = function() {   当事件发生时执行的代码  }</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">&quot;button&quot;</span> <span class="attr">id</span> = <span class="string">&quot;btn&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">tppe</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">&quot;#btn&quot;</span>)</span></span><br><span class="line"><span class="javascript">    btn.onclick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest;</span></span><br><span class="line"><span class="javascript">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span>( xhr.readystate == <span class="number">4</span> &amp;&amp; status == <span class="number">200</span> ) &#123;</span></span><br><span class="line"><span class="javascript">    </span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li></li>
</ol>
</li>
</ol>
</li>
</ol>


<pre><code>&lt;/div&gt;
&lt;footer class=&quot;article-footer&quot;&gt;
  &lt;a data-url=&quot;https://cyclecod.github.io/2021/06/14/Ajax/&quot; data-id=&quot;ckpwirrlf00009svhf7fqh8ky&quot; data-title=&quot;&quot; class=&quot;article-share-link&quot;&gt;分享&lt;/a&gt;
</code></pre>
<p>​<br>​<br>    </footer><br>  </div></p>
<nav id="article-nav">
  

<pre><code>&lt;a href=&quot;/2021/06/07/hello-world/&quot; id=&quot;article-nav-older&quot; class=&quot;article-nav-link-wrap&quot;&gt;
  &lt;strong class=&quot;article-nav-caption&quot;&gt;后一篇&lt;/strong&gt;
  &lt;div class=&quot;article-nav-title&quot;&gt;Hello World&lt;/div&gt;
&lt;/a&gt;
</code></pre>
</nav>


</article>


</section>
        
<pre><code>      &lt;aside id=&quot;sidebar&quot;&gt;
</code></pre>
<p>​    </p>
<p>​    </p>
<p>​    </p>
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a></li></ul>
    </div>
  </div>



<p>​<br>  <div class="widget-wrap"><br>    <h3 class="widget-title">最新文章</h3><br>    <div class="widget"><br>      <ul></p>
<pre><code>      &lt;li&gt;
        &lt;a href=&quot;/2021/06/14/Ajax/&quot;&gt;(no title)&lt;/a&gt;
      &lt;/li&gt;
    
      &lt;li&gt;
        &lt;a href=&quot;/2021/06/07/hello-world/&quot;&gt;Hello World&lt;/a&gt;
      &lt;/li&gt;
    
  &lt;/ul&gt;
&lt;/div&gt;
</code></pre>
  </div>


</aside>
        
<pre><code>  &lt;/div&gt;
  &lt;footer id=&quot;footer&quot;&gt;
</code></pre>
  <div class="outer">
    <div id="footer-info" class="inner">

<pre><code>  &amp;copy; 2021 John Doe&lt;br&gt;
  Powered by &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot;&gt;Hexo&lt;/a&gt;
&lt;/div&gt;
</code></pre>
  </div>
</footer>

<pre><code>&lt;/div&gt;
&lt;nav id=&quot;mobile-nav&quot;&gt;
  
&lt;a href=&quot;/&quot; class=&quot;mobile-nav-link&quot;&gt;Home&lt;/a&gt;
  
&lt;a href=&quot;/archives&quot; class=&quot;mobile-nav-link&quot;&gt;Archives&lt;/a&gt;
</code></pre>
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>




<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>
                
                </div>
            </div>
        </div>
    </div>
</div>

</body>

<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>


<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/typed.js"></script>
<script src="/js/diaspora.js"></script>


<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">


<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>






</html>
